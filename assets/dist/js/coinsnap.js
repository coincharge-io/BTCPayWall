!function(t){"use strict";function e(e){return t.ajax({url:"/wp-admin/admin-ajax.php",method:"GET",data:{action:"btcpw_coinsnap_monitor_invoice_status",invoice_id:e}})}function a(a,i,n,_){let p=setInterval((()=>{e(a).done((function(e){e.success&&(clearInterval(p),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_paid_content_file_invoice",invoice_id:a,nonce_ajax:payment.security},success:function(t){t.success&&location.replace(payment.success_url)},error:function(t){console.log(t.message)}}))})).fail((function(t,e,a){console.log("Error: "+a)}))}),1e4);btcpay.showInvoice(a)}function i(a,i,n,_,p=null){let c=setInterval((()=>{e(a).done((function(e){e.success&&(clearInterval(c),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_paid_invoice",invoice_id:a,order_id:n,amount:_,nonce_ajax:payment.security},success:function(t){t.success&&(/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(p)?location.replace(p):location.reload(!0))},error:function(t){console.log(t.message)}}))})).fail((function(t,e,a){console.log("Error: "+a+e+a.message)}))}),1e4);btcpay.showInvoice(a)}function n(a,i,n=null){let _=setInterval((()=>{e(a).done((function(e){e.success&&(clearInterval(_),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_paid_tipping",invoice_id:a,nonce_ajax:payment.security},success:function(t){t.success&&(/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(n)?location.replace(n):location.reload(!0))},error:function(t){console.log(t.message)}}))}))}),1e4);btcpay.showInvoice(a)}function _(t){const e=document.cookie.split(";");for(let a=0;a<e.length;a++){const i=e[a].trim();if(i.startsWith(t+"="))return i.substring(t.length+1)}return null}t(document).ready((function(){var e=null,i=null;t("#btcpw_digital_download_form").submit((function(n){if(n.preventDefault(),e&&i)a(e);else{var _=t(".btcpw_digital_download").text();t(".btcpw_digital_download").html('<span class="tipping-border" role="status" aria-hidden="true"></span>'),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_generate_content_file_invoice_id",full_name:t("#btcpw_digital_download_customer_name").val(),email:t("#btcpw_digital_download_customer_email").val(),address:t("#btcpw_digital_download_customer_address").val(),phone:t("#btcpw_digital_download_customer_phone").val(),message:t("#btcpw_digital_download_customer_message").val(),nonce_ajax:payment.security},success:function(n){t(".btcpw_digital_download").html(_),n.success&&(e=n.data.invoice_id,i=t("#btcpw_digital_download_customer_info").length?t("#btcpw_digital_download_customer_info"):t("#btcpaywall_checkout_cart"),a(e))},error:function(t){console.log(t.message)}})}})),_("btcpaywall_initiated_purchase")&&t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_paid_content_file_invoice",invoice_id:_("btcpaywall_initiated_purchase"),nonce_ajax:payment.security},success:function(t){t.success&&location.reload()},error:function(t){console.log(t.message)}}),_("btcpw_donation_initiated_"+payment.post_id)&&t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_paid_tipping",invoice_id:_("btcpw_donation_initiated_"+payment.post_id),nonce_ajax:payment.security},success:function(t){t.success&&location.reload()},error:function(t){console.log(t.message)}}),_("btcpw_initiated_"+payment.post_id)&&t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_check_order_after_expiration",order_id:_("btcpw_initiated_"+payment.post_id),nonce_ajax:payment.security},success:function(t){t.success&&location.reload()},error:function(t,e,a){console.log("AJAX call failed: "+e+", "+a)}})})),t(document).ready((function(){var e=null,a=null,n=0,_=null;t("#view_revenue_type, #post_revenue_type").submit((function(p){if(p.preventDefault(),e&&_)i(e,0,a,n,redirectTo);else{var c=t("#btcpw_pay__button").text();t("#btcpw_pay__button").html('<span class="tipping-border" role="status" aria-hidden="true"></span>');var o=t("#btcpw_pay__button").data("post_id");t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_get_invoice_id",post_id:o,full_name:t("#btcpw_revenue_post_customer_name, #btcpw_revenue_view_customer_name, #btcpw_revenue_file_customer_name").val(),email:t("#btcpw_revenue_post_customer_email, #btcpw_revenue_view_customer_email, #btcpw_revenue_file_customer_email").val(),address:t("#btcpw_revenue_post_customer_address, #btcpw_revenue_view_customer_address, #btcpw_revenue_file_customer_address").val(),phone:t("#btcpw_revenue_post_customer_phone, #btcpw_revenue_view_customer_phone, #btcpw_revenue_file_customer_phone").val(),message:t("#btcpw_revenue_post_customer_message, #btcpw_revenue_view_customer_message, #btcpw_revenue_file_customer_message").val(),nonce_ajax:payment.security},success:function(p){t("#btcpw_pay__button").html(c),p.success&&(e=p.data.invoice_id,a=p.data.order_id,n=p.data.amount,_=t(".btcpw_revenue_post_container,.btcpw_revenue_view_container"),i(e,0,a,n))},error:function(t){console.log(t.message)}})}}))})),t(document).ready((function(){var e=null,a=null;t("#tipping_form_box").submit((function(_){if(_.preventDefault(),e&&a)i(e);else{var p=t("#btcpw_tipping__button").text();t("#btcpw_tipping__button").html('<span class="tipping-border" role="status" aria-hidden="true"></span>'),_.preventDefault(),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_tipping",currency:t("#btcpw_tipping_currency").val(),amount:t("#btcpw_tipping_amount").val(),predefined_amount:t("input[type=radio][name=btcpw_tipping_default_amount]:checked").val(),type:"Tipping Box",nonce_ajax:payment.security},success:function(i){t("#btcpw_tipping__button").html(p),i.success&&(window.location.href,i.data.donor,e=i.data.invoice_id,a=t(".btcpw_tipping_box_container"),n(e,0,t("#btcpw_redirect_link").val()))},error:function(t){console.log(t.message)}})}})),t("#tipping_form_box_widget").submit((function(_){if(_.preventDefault(),e&&a)i(e);else{var p=t("#btcpw_tipping__button_btcpw_widget").text();t("#btcpw_tipping__button_btcpw_widget").html('<span class="tipping-border" role="status" aria-hidden="true"></span>'),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_tipping",currency:t("#btcpw_tipping_currency_btcpw_widget").val(),amount:t("#btcpw_tipping_amount_btcpw_widget").val(),type:"Tipping Box Widget",nonce_ajax:payment.security},success:function(i){t("#btcpw_tipping__button_btcpw_widget").html(p),i.success&&(e=i.data.invoice_id,a=t(".btcpw_widget.btcpw_tipping_box_container"),n(e,0,t("#btcpw_redirect_link_btcpw_widget").val()),window.location.href,i.data.donor)},error:function(t){console.log(t.message)}})}})),t("#page_tipping_form").submit((function(_){if(_.preventDefault(),e&&a)i(e);else{var p=t("#btcpw_page_tipping__button").text();t("#btcpw_page_tipping__button").html('<span class="tipping-border" role="status" aria-hidden="true"></span>'),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_tipping",currency:t("#btcpw_page_tipping_currency").val(),amount:t("#btcpw_page_tipping_amount").val(),predefined_amount:t("input[type=radio][name=btcpw_page_tipping_default_amount]:checked").val(),name:t("#btcpw_page_tipping_donor_name").val(),email:t("#btcpw_page_tipping_donor_email").val(),address:t("#btcpw_page_tipping_donor_address").val(),phone:t("#btcpw_page_tipping_donor_phone").val(),message:t("#btcpw_page_tipping_donor_message").val(),type:"Tipping Page",nonce_ajax:payment.security},success:function(i){t("#btcpw_page_tipping__button").html(p),i.success&&(e=i.data.invoice_id,a=t(".btcpw_page_tipping_container"),n(e,0,t("#btcpw_page_redirect_link").val()),window.location.href,i.data.donor)},error:function(t){console.log(t.message)}})}})),t("#skyscraper_tipping_high_form").submit((function(_){if(_.preventDefault(),e&&a)i(e);else{var p=t("#btcpw_skyscraper_tipping_high_button").text();t("#btcpw_skyscraper_tipping_high_button").html('<span class="tipping-border" role="status" aria-hidden="true"></span>'),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_tipping",currency:t("#btcpw_skyscraper_tipping_high_currency").val(),amount:t("#btcpw_skyscraper_tipping_high_amount").val(),predefined_amount:t(" input[type=radio][name=btcpw_skyscraper_tipping_default_amount_high]:checked").val(),name:t("#btcpw_skyscraper_tipping_donor_name_high").val(),email:t("#btcpw_skyscraper_tipping_donor_email_high").val(),address:t("#btcpw_skyscraper_tipping_donor_address_high").val(),phone:t("#btcpw_skyscraper_tipping_donor_phone_high").val(),message:t("#btcpw_skyscraper_tipping_donor_message_high").val(),type:"Tipping Banner High",nonce_ajax:payment.security},success:function(i){t("#btcpw_skyscraper_tipping_high_button").html(p),i.success&&(e=i.data.invoice_id,a=t(".btcpw_skyscraper_banner.high"),n(e,0,t("#btcpw_skyscraper_redirect_link_high").val()),window.location.href,i.data.donor)},error:function(t){console.log(t.message)}})}})),t("#btcpw_widget_skyscraper_tipping_form_high").submit((function(_){if(_.preventDefault(),e&&a)i(e);else{var p=t("#btcpw_widget_btcpw_skyscraper_tipping__button_high").text();t("#btcpw_widget_btcpw_skyscraper_tipping__button_high").html('<span class="tipping-border" role="status" aria-hidden="true"></span>'),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_tipping",currency:t("#btcpw_widget_btcpw_skyscraper_tipping_currency_high").val(),amount:t("#btcpw_widget_btcpw_skyscraper_tipping_amount_high").val(),predefined_amount:t("input[type=radio][name=btcpw_widget_btcpw_skyscraper_tipping_default_amount_high]:checked").val(),name:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_name_high").val(),email:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_email_high").val(),address:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_address_high").val(),phone:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_phone_high").val(),message:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_message_high").val(),type:"Tipping Banner High Widget",nonce_ajax:payment.security},success:function(i){t("#btcpw_widget_btcpw_skyscraper_tipping__button_high").html(p),i.success&&(e=i.data.invoice_id,a=t(".btcpw_widget.btcpw_skyscraper_banner.high"),n(e,0,t("#btcpw_widget_btcpw_skyscraper_redirect_link_high").val()),window.location.href,i.data.donor)},error:function(t){console.log(t.message)}})}})),t("#skyscraper_tipping_wide_form").submit((function(_){if(_.preventDefault(),e&&a)i(e);else{var p=t("#btcpw_skyscraper_tipping_wide_button").text();t("#btcpw_skyscraper_tipping_wide_button").html('<span class="tipping-border" role="status" aria-hidden="true"></span>'),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_tipping",currency:t("#btcpw_skyscraper_tipping_wide_currency").val(),amount:t("#btcpw_skyscraper_tipping_wide_amount").val(),predefined_amount:t("input[type=radio][name=btcpw_skyscraper_tipping_default_amount_wide]:checked").val(),name:t("#btcpw_skyscraper_tipping_donor_name_wide").val(),email:t("#btcpw_skyscraper_tipping_donor_email_wide").val(),address:t("#btcpw_skyscraper_tipping_donor_address_wide").val(),phone:t("#btcpw_skyscraper_tipping_donor_phone_wide").val(),message:t("#btcpw_skyscraper_tipping_donor_message_wide").val(),type:"Tipping Banner Wide",nonce_ajax:payment.security},success:function(i){t("#btcpw_skyscraper_tipping_wide_button").html(p),i.success&&(e=i.data.invoice_id,a=t(".btcpw_skyscraper_banner.wide"),n(e,0,t("#btcpw_skyscraper_redirect_link_wide").val()),window.location.href,i.data.donor)},error:function(t){console.log(t.message)}})}})),t("#btcpw_widget_skyscraper_tipping_form_wide").submit((function(_){if(_.preventDefault(),e&&a)i(e);else{var p=t("#btcpw_widget_btcpw_skyscraper_tipping__button_wide").text();t("#btcpw_widget_btcpw_skyscraper_tipping__button_wide").html('<span class="tipping-border" role="status" aria-hidden="true"></span>'),t.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"btcpw_tipping",currency:t("#btcpw_widget_btcpw_skyscraper_tipping_currency_wide").val(),amount:t("#btcpw_widget_btcpw_skyscraper_tipping_amount_wide").val(),predefined_amount:t("input[type=radio][name=btcpw_widget_btcpw_skyscraper_tipping_default_amount_wide]:checked").val(),name:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_name_wide").val(),email:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_email_wide").val(),address:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_address_wide").val(),phone:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_phone_wide").val(),message:t("#btcpw_widget_btcpw_skyscraper_tipping_donor_message_wide").val(),type:"Tipping Banner Wide Widget",nonce_ajax:payment.security},success:function(i){t("#btcpw_widget_btcpw_skyscraper_tipping__button_wide").html(p),i.success&&(e=i.data.invoice_id,a=t(".btcpw_widget.btcpw_skyscraper_banner.wide"),n(e,0,t("#btcpw_widget_btcpw_skyscraper_redirect_link_wide").val()),window.location.href,i.data.donor)},error:function(t){console.log(t.message)}})}}))}))}(jQuery);